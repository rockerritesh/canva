<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bee Hive Algorithm Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 32px;
            color: #1f2937;
        }
        
        .icon {
            width: 40px;
            height: 40px;
            color: #ec4899;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }
        
        canvas {
            border: 4px solid #fbbf24;
            border-radius: 8px;
            max-width: 100%;
            display: block;
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .stats-box, .legend-box, .info-box {
            padding: 20px;
            border-radius: 8px;
        }
        
        .stats-box {
            background: #fef3c7;
        }
        
        .legend-box {
            background: #dbeafe;
        }
        
        .info-box {
            background: #d1fae5;
            font-size: 12px;
        }
        
        h3 {
            font-size: 16px;
            color: #374151;
            margin-bottom: 12px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .stat-value {
            font-weight: bold;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .button {
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
        }
        
        .button-primary {
            background: #f59e0b;
            color: white;
        }
        
        .button-primary:hover {
            background: #d97706;
        }
        
        .button-secondary {
            background: #6b7280;
            color: white;
        }
        
        .button-secondary:hover {
            background: #4b5563;
        }
        
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
            </svg>
            <h1>Bee Hive Algorithm Simulator</h1>
        </div>
        
        <div class="main-content">
            <div>
                <canvas id="canvas" width="800" height="600"></canvas>
            </div>
            
            <div class="sidebar">
                <div class="stats-box">
                    <h3>Statistics</h3>
                    <div class="stat-item">
                        <span>Generation:</span>
                        <span class="stat-value" id="generation">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Best Fitness:</span>
                        <span class="stat-value" id="bestFitness">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Active Bees:</span>
                        <span class="stat-value" id="activeBees">0</span>
                    </div>
                </div>
                
                <div class="legend-box">
                    <h3>Legend</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ef4444;"></div>
                        <span>Elite Bees</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3b82f6;"></div>
                        <span>Selected Bees</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fbbf24;"></div>
                        <span>Scout Bees</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="border: 2px solid #10b981; background: transparent;"></div>
                        <span>Best Solution</span>
                    </div>
                </div>
                
                <button class="button button-primary" id="toggleBtn">
                    <span id="btnText">▶ Start</span>
                </button>
                
                <button class="button button-secondary" id="resetBtn">
                    <span>↻ Reset</span>
                </button>
                
                <div class="info-box">
                    <h3>How it works</h3>
                    <p style="color: #374151; line-height: 1.5;">
                        The algorithm mimics bee foraging behavior. Scout bees explore random flowers, 
                        elite sites get more recruits to search nearby, and selected sites get fewer recruits. 
                        This balances exploration and exploitation to find the best food sources.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let isRunning = false;
        let animationInterval = null;
        
        const config = {
            scoutBees: 10,
            selectedBees: 5,
            eliteBees: 2,
            recruitsForElite: 10,
            recruitsForSelected: 5,
            patchSize: 30
        };
        
        const gameState = {
            hive: { x: 400, y: 300 },
            flowers: [],
            bees: [],
            generation: 0,
            bestSolution: null
        };
        
        // Initialize flowers
        function initializeFlowers() {
            const flowers = [];
            for (let i = 0; i < 15; i++) {
                flowers.push({
                    x: Math.random() * 750 + 25,
                    y: Math.random() * 550 + 25,
                    nectar: Math.random() * 100 + 20,
                    id: i
                });
            }
            return flowers;
        }
        
        // Calculate fitness
        function calculateFitness(bee, hive) {
            const distance = Math.sqrt(
                Math.pow(bee.x - hive.x, 2) + Math.pow(bee.y - hive.y, 2)
            );
            return (bee.nectar * 2) / (distance / 10 + 1);
        }
        
        // Initialize scout bees
        function initializeScoutBees() {
            const bees = [];
            const flowers = gameState.flowers;
            
            for (let i = 0; i < config.scoutBees; i++) {
                const flower = flowers[Math.floor(Math.random() * flowers.length)];
                bees.push({
                    x: flower.x,
                    y: flower.y,
                    nectar: flower.nectar,
                    fitness: 0,
                    type: 'scout',
                    atHive: false
                });
            }
            
            return bees;
        }
        
        // Run one iteration
        function runIteration() {
            // Calculate fitness for all bees
            gameState.bees.forEach(bee => {
                bee.fitness = calculateFitness(bee, gameState.hive);
            });
            
            // Sort bees by fitness
            gameState.bees.sort((a, b) => b.fitness - a.fitness);
            
            // Select elite and selected bees
            const eliteBees = gameState.bees.slice(0, config.eliteBees);
            const selectedBees = gameState.bees.slice(config.eliteBees, config.eliteBees + config.selectedBees);
            
            const newBees = [];
            
            // Recruit bees for elite sites
            eliteBees.forEach(bee => {
                bee.type = 'elite';
                bee.atHive = false;
                newBees.push(bee);
                
                for (let i = 0; i < config.recruitsForElite; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const dist = Math.random() * config.patchSize;
                    const newX = Math.max(25, Math.min(775, bee.x + Math.cos(angle) * dist));
                    const newY = Math.max(25, Math.min(575, bee.y + Math.sin(angle) * dist));
                    
                    // Find nearest flower
                    let nearestFlower = gameState.flowers[0];
                    let minDist = Infinity;
                    gameState.flowers.forEach(f => {
                        const d = Math.sqrt(Math.pow(f.x - newX, 2) + Math.pow(f.y - newY, 2));
                        if (d < minDist) {
                            minDist = d;
                            nearestFlower = f;
                        }
                    });
                    
                    newBees.push({
                        x: newX,
                        y: newY,
                        nectar: nearestFlower.nectar + (Math.random() - 0.5) * 10,
                        fitness: 0,
                        type: 'recruited-elite',
                        atHive: false
                    });
                }
            });
            
            // Recruit bees for selected sites
            selectedBees.forEach(bee => {
                bee.type = 'selected';
                bee.atHive = false;
                newBees.push(bee);
                
                for (let i = 0; i < config.recruitsForSelected; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const dist = Math.random() * config.patchSize;
                    const newX = Math.max(25, Math.min(775, bee.x + Math.cos(angle) * dist));
                    const newY = Math.max(25, Math.min(575, bee.y + Math.sin(angle) * dist));
                    
                    // Find nearest flower
                    let nearestFlower = gameState.flowers[0];
                    let minDist = Infinity;
                    gameState.flowers.forEach(f => {
                        const d = Math.sqrt(Math.pow(f.x - newX, 2) + Math.pow(f.y - newY, 2));
                        if (d < minDist) {
                            minDist = d;
                            nearestFlower = f;
                        }
                    });
                    
                    newBees.push({
                        x: newX,
                        y: newY,
                        nectar: nearestFlower.nectar + (Math.random() - 0.5) * 10,
                        fitness: 0,
                        type: 'recruited-selected',
                        atHive: false
                    });
                }
            });
            
            // Send remaining bees as scouts
            const remainingScouts = config.scoutBees - (config.eliteBees + config.selectedBees);
            for (let i = 0; i < remainingScouts; i++) {
                const flower = gameState.flowers[Math.floor(Math.random() * gameState.flowers.length)];
                newBees.push({
                    x: flower.x,
                    y: flower.y,
                    nectar: flower.nectar,
                    fitness: 0,
                    type: 'scout',
                    atHive: false
                });
            }
            
            gameState.bees = newBees;
            gameState.generation++;
            
            // Update best solution
            const currentBest = gameState.bees[0];
            if (!gameState.bestSolution || currentBest.fitness > gameState.bestSolution.fitness) {
                gameState.bestSolution = { ...currentBest };
            }
            
            updateStats();
        }
        
        // Draw everything
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#f0f9ff';
            ctx.fillRect(0, 0, 800, 600);
            
            // Draw flowers
            gameState.flowers.forEach(flower => {
                const size = 6 + (flower.nectar / 120) * 6;
                
                ctx.fillStyle = '#fbbf24';
                ctx.beginPath();
                ctx.arc(flower.x, flower.y, size, 0, Math.PI * 2);
                ctx.fill();
                
                // Petals
                const nectarRatio = flower.nectar / 120;
                ctx.fillStyle = `rgba(244, 114, 182, ${0.6 + nectarRatio * 0.4})`;
                for (let i = 0; i < 5; i++) {
                    const angle = (i * Math.PI * 2) / 5;
                    ctx.beginPath();
                    ctx.arc(
                        flower.x + Math.cos(angle) * size,
                        flower.y + Math.sin(angle) * size,
                        size * 0.6,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                }
                
                // Show nectar value
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 10px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(Math.round(flower.nectar), flower.x, flower.y + size + 12);
            });
            
            // Draw hive
            ctx.fillStyle = '#92400e';
            ctx.beginPath();
            ctx.arc(gameState.hive.x, gameState.hive.y, 20, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#fbbf24';
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.arc(gameState.hive.x, gameState.hive.y - 5 + i * 5, 18, 0, Math.PI * 2);
                ctx.strokeStyle = '#92400e';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            // Draw bees
            gameState.bees.forEach(bee => {
                // Draw line from bee to hive
                if (!bee.atHive) {
                    ctx.strokeStyle = 'rgba(156, 163, 175, 0.2)';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(gameState.hive.x, gameState.hive.y);
                    ctx.lineTo(bee.x, bee.y);
                    ctx.stroke();
                }
                
                // Draw bee
                let beeColor = '#fbbf24';
                if (bee.type === 'elite') beeColor = '#ef4444';
                else if (bee.type === 'selected') beeColor = '#3b82f6';
                else if (bee.type === 'recruited-elite') beeColor = '#fca5a5';
                else if (bee.type === 'recruited-selected') beeColor = '#93c5fd';
                
                ctx.fillStyle = beeColor;
                ctx.beginPath();
                ctx.arc(bee.x, bee.y, 4, 0, Math.PI * 2);
                ctx.fill();
                
                // Wings
                ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.beginPath();
                ctx.ellipse(bee.x - 3, bee.y, 3, 2, -Math.PI / 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.ellipse(bee.x + 3, bee.y, 3, 2, Math.PI / 4, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw best solution highlight
            if (gameState.bestSolution) {
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(gameState.bestSolution.x, gameState.bestSolution.y, 15, 0, Math.PI * 2);
                ctx.stroke();
            }
        }
        
        // Update statistics display
        function updateStats() {
            document.getElementById('generation').textContent = gameState.generation;
            document.getElementById('bestFitness').textContent = gameState.bestSolution ? gameState.bestSolution.fitness.toFixed(2) : '0';
            document.getElementById('activeBees').textContent = gameState.bees.length;
        }
        
        // Toggle start/pause
        document.getElementById('toggleBtn').addEventListener('click', () => {
            isRunning = !isRunning;
            const btnText = document.getElementById('btnText');
            
            if (isRunning) {
                btnText.textContent = '⏸ Pause';
                animationInterval = setInterval(() => {
                    runIteration();
                    draw();
                }, 500);
            } else {
                btnText.textContent = '▶ Start';
                clearInterval(animationInterval);
            }
        });
        
        // Reset button
        document.getElementById('resetBtn').addEventListener('click', () => {
            isRunning = false;
            clearInterval(animationInterval);
            document.getElementById('btnText').textContent = '▶ Start';
            
            gameState.flowers = initializeFlowers();
            gameState.bees = initializeScoutBees();
            gameState.generation = 0;
            gameState.bestSolution = null;
            
            updateStats();
            draw();
        });
        
        // Initialize
        gameState.flowers = initializeFlowers();
        gameState.bees = initializeScoutBees();
        updateStats();
        draw();
    </script>
</body>
</html>
